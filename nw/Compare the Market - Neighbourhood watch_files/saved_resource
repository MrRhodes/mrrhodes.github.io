mmcore.SetCookie('mmid','-1315580993|4QEAAAoYD3P3kAoAAA==',365,1);mmcore.SetCookie('pd','1221694676|AAIAAAoBQhgPc/eQCiZVyzkgAGg5C96DbdFIAA0AAADPCpBvfEjRSAAAAAD/////AP//////////ACVjbXMuZGV2LmludGVybmFsLmNvbXBhcmV0aGVtYXJrZXQuY29tA78KAgAAAAIAAQAAAAAA9GkAAPRpAAD0aQAAAgCaGwAAAIpRYiK/Cv////8Avwq/Cv//AwAAAAAAAAEraAAAj4kAAACZGwAAAOThss2/Cv////8Avwq/Cv//AwAAAAAAAAEqaAAAjIkAAAL0aQAA0QAAAPBpAAACAAAAAAAAAUU=',365);mmcore.SetCookie('srv','ldnvwcgeu05',365);(function(){if(typeof(mmcore.GenInfo)!='object')mmcore.GenInfo={};mmcore.EH=function(e){var s=e.message+'\r\n';if(!window.mm_error)window.mm_error=s;else window.mm_error+=s;};
try{
/* modified by Alexander Tserkovniy 15.10.2013 */
/* search by 'beforeSyncShowAndRender' key */
;(function (m) {
    'use strict';

    function Campaign(config) {
        this._objStyle = {};
        this._config = config;
        this.name = config.name;
        this.mmPath = config.mmPath;
    }
    Campaign.prototype.addStyle = (function () {
        var cg1 = document.getElementById(m.cprefix + '1'), st;
        return function (css, name) {
            st = this._objStyle[name];
            name = name || "mm_style";
            if (!st) {
                st = document.createElement("style");
                st.type = "text/css";
                cg1.parentNode.insertBefore(st, cg1);
                this._objStyle[name] = st;
            }
            if (st.styleSheet) {
                st.styleSheet.cssText += css;
            } else {
                st.innerHTML += css;
            }
        };
    }());
    Campaign.prototype.removeStyle = function (name) {
        var st = this._objStyle[name];
        name = name || "mm_style";
        if (st) {
            st.parentNode.removeChild(st);
        }
        delete this._objStyle[name];
    };
    Campaign.prototype.preloadImages= function (tc) {
        if (!tc) {
            return false;
        }
        var self = this, mb, con, v, tcc, src, i, gi = m.GenInfo[self._config.name];
        self.mb = {};
        self._rmb = [];
        for (mb in tc) {
            if (tc.hasOwnProperty(mb)) {
                v = gi[mb.toLowerCase()];
                self.mb[mb] = v;
                if (!/undefined|default/i.test(v)) {
                    self._rmb.push(mb);
                    if (!self._config.mmPath) {
                        continue;
                    }
                    for (con in tc[mb]) {
                        if (tc[mb].hasOwnProperty(con)) {
                            tcc = tc[mb][con];
                            i = tcc.length;
                            while (i--) {
                                tc[mb][con][i] = tcc[i].replace(/\[mm_path\]([^)'"]+)/g, function (m, img) {
                                    src = (new Image()).src = self._config.mmPath + img;
                                    return src;
                                });
                            }
                        }
                    }
                }
            }
        }
        return self._rmb.length;
    };
    Campaign.prototype.render = function () {
        var self = this,
            isAsync = !!self._config.pageID,
            content = {
                show: function () {
                    self.removeStyle(self._config.name);
                },
                hide: function () {
                    self.addStyle(self._config.hide + '{position: relative; left:-10000px}', self._config.name);
                }
            },
            checker = (function () {
                var is_checker_set = typeof self._config.checker === 'function',
                    exit = (isAsync) ? false : m._docEnd;
                return function () {
                    return is_checker_set ? (self._config.checker() || exit) : m._docEnd;
                };
            }()),
            stopChecker = (function () {
                var is_checker_set = typeof self._config.stopChecker === 'function',
                    exit = m._docEnd;
                if (isAsync) {
                    exit = false;
                    setTimeout(function () { exit = true; }, self._config.checkerTimeout || 5000);
                }
                return function () {
                    return is_checker_set ? (self._config.stopChecker() || exit) : m._docEnd;
                };
            }());
        if (isAsync || self.preloadImages((typeof tc !== 'undefined' && tc) || null)) {
            content.hide();
        } else {
            return;
        }
        (function waiter() {
            if (checker()) {
                if (isAsync) {
                    m._async = true;
                    m.SetPageID(self._config.pageID);
                    if (typeof self._config.beforeCGRequest === 'function') {
                        self._config.beforeCGRequest();
                    }
                    m.AddDocLoadHandler(function () {});
                    m.CGRequest(function () {
                        m.AddDocLoadHandler(function () {
                            if (typeof self._config.afterCGRequest === 'function') {
                                self._config.afterCGRequest();
                            }
                            content.show();
                        });
                    });
                    m.HideMaxyboxes = function () {};
                    setTimeout(content.show, self._config.emergencyOpenTimeout || 3000);
                } else if (self._rmb.length) {
                    /* Warning it is not basic functionality */
                    /* Added by Alexander Tserkovniy */
                        if (typeof self._config.beforeSyncShowAndRender === 'function') {
                            self._config.beforeSyncShowAndRender();
                        }
                    /* [end adding] */
                    m.RenderMaxyboxes(self._rmb);
                    content.show();
                }
            } else if (!stopChecker()) {
                setTimeout(waiter, 50);
            } else {
                content.show();
            }
        }());
    };
    m.initCampaign = function (config) {
        return new Campaign(config);
    };
}(window.mmcore));
}catch(err){mmcore.EH(err);}
try{
if (!this.JSON) {
  JSON = function() {
    function f(n) {
      return n < 10 ? '0' + n : n;
    }

    Date.prototype.toJSON = function() {
      return this.getUTCFullYear() + '-' +
        f(this.getUTCMonth() + 1) + '-' +
        f(this.getUTCDate()) + 'T' +
        f(this.getUTCHours()) + ':' +
        f(this.getUTCMinutes()) + ':' +
        f(this.getUTCSeconds()) + 'Z';
    };
    var m = {
      '\b': '\\b',
      '\t': '\\t',
      '\n': '\\n',
      '\f': '\\f',
      '\r': '\\r',
      '"': '\\"',
      '\\': '\\\\'
    };

    function stringify(value, whitelist) {
      var a, i, k, l, r = /["\\\x00-\x1f\x7f-\x9f]/g,
        v;
      switch (typeof value) {
        case 'string':
          return r.test(value) ? '"' + value.replace(r, function(a) {
            var c = m[a];
            if (c) {
              return c;
            }
            c = a.charCodeAt();
            return '\\u00' + Math.floor(c / 16).toString(16) +
              (c % 16).toString(16);
          }) + '"' : '"' + value + '"';
        case 'number':
          return isFinite(value) ? String(value) : 'null';
        case 'boolean':
        case 'null':
          return String(value);
        case 'object':
          if (!value) {
            return 'null';
          }
          if (typeof value.toJSON === 'function') {
            return stringify(value.toJSON());
          }
          a = [];
          if (typeof value.length === 'number' && !(value.propertyIsEnumerable('length'))) {
            l = value.length;
            for (i = 0; i < l; i += 1) {
              a.push(stringify(value[i], whitelist) || 'null');
            }
            return '[' + a.join(',') + ']';
          }
          if (whitelist) {
            l = whitelist.length;
            for (i = 0; i < l; i += 1) {
              k = whitelist[i];
              if (typeof k === 'string') {
                v = stringify(value[k], whitelist);
                if (v) {
                  a.push(stringify(k) + ':' + v);
                }
              }
            }
          } else {
            for (k in value) {
              if (typeof k === 'string') {
                v = stringify(value[k], whitelist);
                if (v) {
                  a.push(stringify(k) + ':' + v);
                }
              }
            }
          }
          return '{' + a.join(',') + '}';
      }
    }

    return {
      stringify: stringify,
      parse: function(text, filter) {
        var j;

        function walk(k, v) {
          var i, n;
          if (v && typeof v === 'object') {
            for (i in v) {
              if (Object.prototype.hasOwnProperty.apply(v, [i])) {
                n = walk(i, v[i]);
                if (n !== undefined) {
                  v[i] = n;
                }
              }
            }
          }
          return filter(k, v);
        }

        if (/^[\],:{}\s]*$/.test(text.replace(/\\./g, '@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, ']').replace(/(?:^|:|,)(?:\s*\[)+/g, ''))) {
          j = eval('(' + text + ')');
          return typeof filter === 'function' ? walk('', j) : j;
        }
        throw new SyntaxError('parseJSON');
      }
    };
  }();
}

// example of use: mmcore.updateMaximiserData('T33');

mmcore.updateMaximiserData = function(test_name){
	if (mmcore.GetCookie('mm_'+test_name+'CustomerAccountPage_geninfo_sended', 1)) return;
	
	var c2o = {},
	  gi = mmcore.GenInfo;

	for (var k in gi) {
	  if (!(k in c2o)) {
		c2o[k] = {};
	  }
	  for (var j in gi[k]) {
		if (!(j in c2o[k])) c2o[k][j] = gi[k][j];
		if (c2o[k][j] !== gi[k][j]) c2o[k][j] = gi[k][j];
	  }
	}

	c2o = JSON.stringify(c2o);

	mmcore.SetCookie('mm_'+test_name+'CustomerAccountPage_geninfo_sended', 1, 365, 1);

	if(typeof maximiser !== 'undefined'){
		maximiser.UpdateMaximiserData(c2o);
	}
}
}catch(err){mmcore.EH(err);}
try{
(function ( b ) {
	function f( a ) {
		var c = [], d, e;
		for ( e in a )a.hasOwnProperty( e ) && (d = a[e], c.push( [escape( e ), escape( d )].join( "=" ) ));
		a = c.join( "&" );
		b.SetCookie( g, a, h, !0 )
	}

	var g = "mm_pc", h = 365, j = b._Clear;
	b._Clear = function () {
		j.apply( b, arguments );
		var a = b.GetPersistentCriteria(), c, d;
		for ( d in a )a.hasOwnProperty( d ) && (c = a[d], b.SetPersCriterion( d, c ))
	};
	b.SetPersistentCriterion = function ( a, c ) {
		var d = b.GetPersistentCriteria();
		d[a] = c;
		f( d );
		b.SetPersCriterion( a, c )
	};
	b.UnsetPersistentCriterion = function ( a ) {
		var c = b.GetPersistentCriteria();
		if ( c.hasOwnProperty( a ) ) {
			delete c[a];
			f( c );
			try {delete b._vars.uat[a]} catch ( d ) {}
		}
	};
	b.GetPersistentCriteria = function () {
		var a = {};
		b.GetCookie( g, !0 ).replace( /([^&]*)=([^&]*)/g, function ( b, d, e ) {a[unescape( d )] = unescape( e )} );
		return a
	};
	b.GetPersistentCriterion = function ( a ) {
		var c = b.GetPersistentCriteria();
		return c.hasOwnProperty( a ) ? c[a] : null
	}
})( mmcore );

(function ( m ) {
	var setCustomPersCrit;
	var uat, newUAT, fromStringToObj;

	// Price

	setCustomPersCrit = function ( name, val ) {
		var _m = mmcore,
			_old = _m.GetCookie( 'uat' ),
			_f = _old.indexOf( name + '=' ) + 1,
			_re = new RegExp( name + "=[^;]*" ),
			_new = name + '=' + val;

		_m.SetCookie( 'uat', _old ? (_f ? _old.replace( _re, _new ) : _old + ';' + _new) : _new, 30 );
	};
	fromStringToObj = function ( str ) {
		var obj, allStringCookies, key, value;

		allStringCookies = mmcore.GetParam( 'uat' ).split( ';' );
		obj = {};

		try {
			for ( var i = 0; i < allStringCookies.length; i += 1 ) {
				if ( ~allStringCookies[i].indexOf( '=' ) ) {
					key = allStringCookies[i].split( '=' )[0].replace( /\s/, '_' );
					value = allStringCookies[i].split( '=' )[1];

					obj[key] = value;
				}
			}
		} catch ( e ) {
			m.EH( e );
		}

		return obj;
	};

	m.AddDocLoadHandler( function () {
		var $ = window.jQuery;

		// Retrieved
		(function () {
			var cookieName, doOn;

			cookieName = 'mm_PCRetrieved';

			if ( location.href.indexOf( 'my.comparethemarket.com' ) + 1 ) {
				m.SetCookie( cookieName, 'Retrieved', 1, 1 );
			} else if ( location.href.indexOf( 'm.quote.comparethemarket.com/Car' ) + 1 && location.href.indexOf( 'rqstyp=newmotorquote' ) + 1 ) {
				m.SetCookie( cookieName, 'New', 1, 1 );
			}

			doOn = function ( pathname, func ) {
				var doFuncOne = (function () {
					var isDone = false;

					return function () {
						if ( isDone ) { return; }
						isDone = true;
						func();
					};
				}());

				if ( location.href.indexOf( pathname ) + 1 ) { doFuncOne(); }

				if ( window.history && 'pushState' in window.history ) {
					$( window ).on( 'popstate', function ( event ) {
						if ( event.isTrigger && location.pathname.indexOf( pathname ) + 1 ) {
							doFuncOne();
						}
					} );
				} else {
					$( window ).on( 'hashchange', function () {
						if ( location.hash.indexOf( '#' + pathname ) === -1 ) { return; }
						doFuncOne();
					} );
				}
			};

			doOn( 'Car/quotes-page', function () {
				var cookie = m.GetCookie( cookieName, 1 );
				m.SetCookie( cookieName, '', -1, 1 );

				if ( !cookie ) { return; }

				setCustomPersCrit( 'CarRetrieved', cookie );
			} );
		}());

		// Other
		(function () {
			var objPC, addToObjPCUserAge, addToObjPCTitle, addToObjPCKids16, addToObjPCCarAge, setPC;

			if ( location.href.indexOf( 'm.quote.comparethemarket.com/Car' ) === -1 ) {return;}

			objPC = {}

			addToObjPCUserAge = function () {
				var day, month, year, thisDate, thisDay, thisMonth, thisYear, prUserAge;

				day = parseInt( $( '#proposer-dob-day :selected' ).val(), 10 );
				month = parseInt( $( '#proposer-dob-month :selected' ).val(), 10 );
				year = parseInt( $( '#proposer-dob-year :selected' ).val(), 10 );

				if ( !day ) { return; }

				month = month - 1;

				thisDate = new Date();
				thisDay = thisDate.getDate();
				thisMonth = thisDate.getMonth();
				thisYear = thisDate.getYear() + 1900;

				prUserAge = thisYear - year;

				if ( thisMonth < month || (thisMonth === month && thisDay < day) ) {
					prUserAge -= 1;
				}

				prUserAge = (function () {
					switch ( true ) {
						case prUserAge < 20:
							return 'ALess20';
						case prUserAge < 26:
							return 'A20_25';
						case prUserAge < 31:
							return 'A26_30';
						case prUserAge < 41:
							return 'A31_40';
						case prUserAge < 51:
							return 'A41_50';
						default:
							return 'APlus50';
					}
				})();

				objPC.UserAge = prUserAge;
			};
			addToObjPCTitle = function () {
				var prTitle = $( '#proposer-title :selected' ).text();

				if ( !prTitle ) { return; }

				if ( prTitle.indexOf( 'Dr' ) + 1 ) {
					if ( prTitle.indexOf( 'Dr-M' ) + 1 ) {
						prTitle = 'DrM';
					} else {
						prTitle = 'DrF';
					}
				}

				objPC.Title = prTitle;
			};
			addToObjPCKids16 = function () {
				var prKids16 = $( '#proposer-children-yes' );

				if ( !prKids16.length ) { return; }

				if ( prKids16.is( ':checked' ) ) {
					prKids16 = 'Yes';
				} else {
					prKids16 = 'No';
				}

				objPC.Kids16 = prKids16;
			};
			addToObjPCCarAge = function () {
				var year, prCarAge;

				year = $( 'dd.vehicle-summary span[data-bind*="VehicleSummary"]' );
				year = year.text().match( /\d{4}/ );

				if ( !year ) { return; }

				year = parseFloat( year[0], 10 );
				prCarAge = (new Date().getYear() + 1900) - year;

				prCarAge = (function () {
					switch ( true ) {
						case prCarAge < 3:
							return '<3';
						case prCarAge < 5:
							return '3-5';
						default:
							return '>5';
					}
				})();

				objPC.CarAge = prCarAge;
			};

			setPC = function () {
				addToObjPCUserAge();
				addToObjPCTitle();
				addToObjPCKids16();
				addToObjPCCarAge();

				$.each( objPC, function ( p, val ) {
					setCustomPersCrit( p, val );
				} );

				objPC = {};
			};

			$( document ).on( 'change', '#proposer-dob-day, #proposer-dob-month, #proposer-dob-year', function () { setPC(); } );
			$( document ).on( 'change', '#proposer-title', function () { setPC(); } );
			$( document ).on( 'change', '#proposer-children-yes, #proposer-children-no', function () { setPC(); } );
			$( document ).on( 'change', '#possible-vehicles', function () { setPC(); } );

			setPC();

			if ( window.history && 'pushState' in window.history ) {
				$( window ).on( 'popstate', function ( event ) {
					if ( event.isTrigger ) {
						setPC();
					}
				} );
			} else {
				$( window ).on( 'hashchange', function () {
					setPC();
				} );
			}
		}());
	} );

	if ( location.href.indexOf( 'quote.comparethemarket.com/Motor/Motor/PricePage.aspx' ) + 1 ) {
		(function () {
			var prCarRetrieved;

			if ( location.href.indexOf( 'retrievedQuote=true' ) + 1 ) {
				prCarRetrieved = 'Retrieved';
			} else {
				prCarRetrieved = 'New';
			}

			setCustomPersCrit( 'CarRetrieved', prCarRetrieved );
		}());
	}
	else if ( location.href.indexOf( 'm.quote.comparethemarket.com/Car' ) + 1 ) {

		m.AddDocLoadHandler( function () {
			var $ = window.jQuery;

			(function () {
				var attr = 'New';
				if ( m.GetCookie( 'mm_PCT43NewRtvEdit', 1 ) ) {
					m.SetCookie( 'mm_PCT43NewRtvEdit', '', -1, 1 );
					attr = 'Retrieve';
				}
				setCustomPersCrit( 'T43NewRtv', attr );
			}());

			//			$( document ).ajaxComplete( function ( e, xhr, settings ) {
			//				if ( xhr && xhr.readyState === 4 && xhr.status === 200 && settings.url.indexOf( 'Risk/SavePersonalDetails' ) + 1 ) {
			//					setCustomPersCrit( 'T43Title', $( '#proposer-title' ).val() );
			//
			//					(function () {
			//						var day, month, year, thisDate, thisDay, thisMonth, thisYear, prT43Title;
			//
			//						day = parseInt( $( '#proposer-dob-day' ).val(), 10 );
			//						month = parseInt( $( '#proposer-dob-month' ).val(), 10 );
			//						year = parseInt( $( '#proposer-dob-year' ).val(), 10 );
			//						month = month - 1;
			//
			//						thisDate = new Date();
			//						thisDay = thisDate.getDate();
			//						thisMonth = thisDate.getMonth();
			//						thisYear = thisDate.getYear() + 1900;
			//
			//						prT43Title = thisYear - year;
			//
			//						if ( thisMonth < month || (thisMonth === month && thisDay < day) ) { prT43Title -= 1; }
			//
			//						if ( prT43Title < 20 ) { prT43Title = '<20'; }
			//						else if ( prT43Title < 26 ) { prT43Title = '20-25'; }
			//						else if ( prT43Title < 31 ) { prT43Title = '26-30'; }
			//						else if ( prT43Title < 41 ) { prT43Title = '31-40'; }
			//						else if ( prT43Title < 51 ) { prT43Title = '41-50'; }
			//						else { prT43Title = '>50'; }
			//
			//						setCustomPersCrit( 'T43Age', prT43Title );
			//					}());
			//				}
			//			} );

		} );
	} else if ( location.href.indexOf( 'my.comparethemarket.com' ) + 1 ) {
		m.AddDocLoadHandler( function () {
			var $ = window.jQuery;
			$( document ).on( 'click', 'button:contains(View new prices), button:contains(View prices), button:contains(Edit details)', function () {
				if ( !$( this ).closest( '.quote ' ).find( 'h4.car' ).length ) { return; }
				setCustomPersCrit( 'T43NewRtv', 'Retrieve' );
				if ( $( this ).is( 'button:contains(Edit details)' ) ) {
					m.SetCookie( 'mm_PCT43NewRtvEdit', 1, 1, 1 );
				}
			} );
		} );
	}

	(function () {
		var persAlias;

		// T37ProdClass
		// T37Recency
		// T37LastQuote
		// Price

		/*
		 // yes they all must be without prefix T37, but for backward Compatibility we will stay them.
		 */
		m.globals = m.globals || {};
		m.globals.getPriceValue = function () {
			var price, cookies, self, attr;

			cookies = m.GetCookie( 'CTMJourney', 1 ).split( '&' );

			for ( var i = 0; i < cookies.length; i += 1 ) {
				self = cookies[i].toString();
				if ( self.indexOf( 'CheapestLastPrice' ) < 0 ) continue;
				price = self.replace( /\D/g, '' );
				return price;
			}

			return price
		};

		m.globals.getPriceAttr = function () {
			var price = m.globals.getPriceValue();

			if ( !price || parseInt( price, 10 ) === 0 ) return 'NoValue';
			return 'Complete';
		};

		m.globals.getFromCookie = function ( what ) {
			var cookie;
			cookie = m.GetCookie( 'CTMJourney', 1 );
			return m._ValByKey( cookie, what, '=', '&' );
		};

		m.globals.getLastQuoteDatePC = function () {
			var helper, lastQuoteDate, reg, alternativeReg, result;

			helper = m.globals.renderHelper();
			lastQuoteDate = helper.lastQuoteDate;
			/*
			 **	examples of match:
			 **		Thu, 03 Oct 2013 09:43:05 GMT // ["03 Oct 2013", "03", "Oct", "2013"]
			 **		26/09/2013 // ["26/09/2013", "26", "09", "2013"]
			 */
			reg = /(\d+)\s?(\w{3})\s?(\d{4})/i;
			alternativeReg = /(\d{2})\/(\d{2})\/(\d{4})/i;
			result = reg.test( lastQuoteDate );
			result = result || alternativeReg.test( lastQuoteDate );

			return (result) ? 'Complete' : 'NoValue';
		};

		m.globals.renderHelper = function () {
			var productClass, lastQuoteDate;

			productClass = m.globals.getFromCookie( 'ProductClass' );
			lastQuoteDate = m.globals.getFromCookie( 'LastQuoteDate' );

			function isProductMatched() {
				/* check for productClass */
				switch ( productClass ) {
					case 'PC':
					case 'HH':
					case 'LC':
					case 'PT':
					case 'BI':
					case 'LI':
					case 'TR':
					case 'CV':
					{
						return true;
					}
						break;
					default:
					{
						return false;
					}
				}
			}

			function isLastQuoteDateIsExist() {
				return !!lastQuoteDate;
			}

			return {
				productClass: productClass,
				lastQuoteDate: lastQuoteDate,
				/* methods */
				isProductMatched: isProductMatched,
				isLastQuoteDateIsExist: isLastQuoteDateIsExist
			};
		};

		m.globals.getRecencyPC = function () {
			/* Parsing date for T37Recency PC */
			var date, reg, matchedData, day, month,
				year, now, daysDifference, pcVariants, iterateKey;

			function countDays( day, month, year ) {
				var curD = new Date();
				curD.setDate( day );
				curD.setMonth( month );
				curD.setYear( year );

				return (new Date() - curD) / 86400000;
			}

			/* date in format 31/10/2013 */
			date = m.globals.getFromCookie( 'CoverStartDate' );

			if ( !date ) {
				return 'NoValue';
			}

			reg = /(\d{2})\/(\d{2})\/(\d{4})/;
			matchedData = date.match( reg );
			day = matchedData[1];
			month = matchedData[2];
			month = parseInt( month, 10 ) - 1;
			year = matchedData[3];
			daysDifference = countDays( day, month, year );
			daysDifference = -parseInt( daysDifference, 10 );

			/*
			 IF CoverStartDate =	Today OR in the future	THEN set PC2 [T37Recency] = ‘NotExpired’
			 IF CoverStartDate =	≤30 days in the past	THEN set PC2 [T37Recency] = ‘Within30’
			 IF CoverStartDate =	>30 days in the past	THEN set PC2 [T37Recency] = ‘Over30’
			 IF CoverStartDate =	empty value OR cookie absent THEN set PC2 [T37Recency] = ‘NoValue’
			 */

			pcVariants = {
				'NotExpired': function ( daysDifference ) {
					return daysDifference >= 0;
				},
				'Within30': function ( daysDifference ) {
					return daysDifference >= -30;
				},
				'Over30': function ( daysDifference ) {
					return daysDifference < -30;
				}
			};

			var tryCatchError = {};
			try {
				for ( iterateKey in pcVariants ) {
					if ( pcVariants.hasOwnProperty( iterateKey ) ) {
						if ( pcVariants[iterateKey]( daysDifference ) ) {
							tryCatchError.pcName = iterateKey;
							throw tryCatchError;
						}
					}
				}
			} catch ( e ) {
				if ( e === tryCatchError ) {
					return tryCatchError.pcName;
				}
			}

			return 'NoValue';
		};

		m.globals.productClass = m.globals.renderHelper().productClass;

		persAlias = {
			'PC': 'Car',
			'HH': 'Home',
			'LC': 'Van',
			'PT': 'Pet',
			'BI': 'Bike',
			'CV': 'Van',
			'LI': 'Life',
			'TR': 'Travel'
		};

		uat = m.GetParam( 'uat' );

		if ( uat && typeof uat === 'string' ) {
			newUAT = fromStringToObj( uat );
			m.SetParam( 'uat', newUAT );
		}

		m.SetPersistentCriterion( 'T37ProdClass', persAlias[m.globals.productClass] || '' );
		m.SetPersistentCriterion( 'T37Recency', m.globals.getRecencyPC() );
		m.SetPersistentCriterion( 'T37LastQuote', m.globals.getLastQuoteDatePC() );
		m.SetPersistentCriterion( 'Price', m.globals.getPriceAttr() );
	}());

}( window.mmcore ));


}catch(err){mmcore.EH(err);}
try{
var m = window.mmcore;
var search_i = setInterval(function(){

	// Checking of element
	var li = document.getElementsByTagName('li'), l = li.length, result;
	while(l--) if(li[l].className == 'endLeft current') result = li[l];
	if (!result) return;
	clearInterval(search_i);

	// Detected
	m.SetCookie('mm_TSN_home', 1, 1, 1);
	m._async = true;
	m.SetPageID('Home page');
	m.CGRequest()

},50);

m.AddDocLoadHandler(function () {
	clearInterval(search_i);
});
}catch(err){mmcore.EH(err);}
try{
mmcore.setCustomPersCrit = function(name, val){
	var _m = mmcore,
		_old = _m.GetCookie('uat'),
		_f = _old.indexOf(name+'=') + 1,
		_re = new RegExp(name+"=[^;]*"),
		_new = name+'='+val;
		
	_m.SetCookie('uat', _old ? (_f ? _old.replace(_re, _new) : _old + ';' + _new) : _new, 30);
};

mmcore.isNewSession = function (){
	if(mmcore.GetCookie('mm-T41-generate', 1)){
		var start = "New";
		var m, sessionIs, cookieSession, cookie30min, newDay;
		var curentDate, curentDateForCompare;
		
		newDay = false;
		curentDateForCompare ="";
		m = window.mmcore;
		sessionIs = 'Subsequent';
		curentDate = new Date();
		curentDateForCompare = curentDate.getDate()+"" + curentDate.getMonth()+"" + curentDate.getFullYear()+"";
		if (!mmcore.GetCookie('curentDateForCompare', 1)){
			mmcore.SetCookie('curentDateForCompare', curentDateForCompare, 365, 1)
		}

		if (curentDateForCompare !== mmcore.GetCookie('curentDateForCompare', 1)){
			newDay = true;
		}

		mmcore.SetCookie('curentDateForCompare', curentDateForCompare, 365, 1)
		

		cookieSession = m.GetCookie('mm_VisitDepth_Session', 1);
		cookie30min = m.GetCookie('mm_VisitDepth_30min', 1);

		if (!cookie30min || !cookieSession || newDay) {
			sessionIs = start;
			if(mmcore.GetCookie('notFirtsNew', 1)){
				sessionIs = 'NewNotFirst';
			}
			mmcore.SetCookie('notFirtsNew', 1, 365, 1);
			m.SetCookie('mm_VisitDepth_30min', '1', 1/48, 1);
			if (!cookieSession) {
				m.SetCookie('mm_VisitDepth_Session', '1', 0, 1)
			}
		}

		mmcore.T41session = sessionIs;	
	}
}
mmcore.AddDocLoadHandler(function(){
	mmcore.isNewSession()
	if (mmcore.T41session === 'NewNotFirst') {
		mmcore.setCustomPersCrit('T41Age', '');
		mmcore.setCustomPersCrit('T41Title', '');
		mmcore.setCustomPersCrit('T41NewRtv', '');
	}
})
}catch(err){mmcore.EH(err);}
try{
/*global mmcore*/
;
(function waiter() {
	'use strict';

	/*
	 **	Car https://quote.comparethemarket.com/Motor/Motor/PricePage.aspx
	 **	Home https://quote.comparethemarket.com/HouseHold/Quote/PricePage.aspx
	 **	Bike https://quote.comparethemarket.com/Bike/Quote/PricePage.aspx
	 **	Van https://quote.comparethemarket.com/Commercial/Motor/PricePage.aspx
	 **	Pet https://quote.comparethemarket.com/Pet/Pet/PricePage.aspx
	 **	Life https://quote.comparethemarket.com/LifeInsurance/Life/PricePage/Index?route=Normal
	 **	Travel https://www.comparethemarket.com/travel-insurance/Prices
	 **	CC http://www.comparethemarket.com/credit-cards/balance-transfer/
	 **	http://www.comparethemarket.com/credit-cards/balance-transfer-and-purchases/
	 **	http://www.comparethemarket.com/credit-cards/purchases/
	 **	http://www.comparethemarket.com/credit-cards/cashback-and-rewards/
	 **	http://www.comparethemarket.com/credit-cards/low-apr/
	 **	http://www.comparethemarket.com/credit-cards/cards-from-your-bank/
	 **	http://www.comparethemarket.com/credit-cards/credit-building/
	 **	Energy http://www.comparethemarket.com/energy/Results/YourResults
	 **	Other https://business.comparethemarket.com/Compare-the-Market/Landlord-Insurance/Your-quotes
	 **	https://business.comparethemarket.com/Compare-the-Market/Tradesman-Professional-Insurance/Your-quotes
	 **	https://comparethemarket.comparisoncreator.com/breakdown-cover/results/
	 **	http://www.comparethemarket.com/mortgages/remortgage/
	 **	http://www.comparethemarket.com/mortgages/moving-home/
	 **	http://www.comparethemarket.com/mortgages/first-time-buyer/
	 **	http://www.comparethemarket.com/mortgages/buy-to-let/
	 **	http://www.comparethemarket.com/savings-accounts/
	 **	http://www.comparethemarket.com/current-accounts/
	 **	http://www.comparethemarket.com/health-insurance/
	 **	http://www.comparethemarket.com/accident-sickness-and-unemployment-insurance/
	 */

	var $, bindActions;

	function setJqueryVar() {
		$ = window.jQuery;
	}

	function delegate( handlerNode, eventName, handlerCondition, handler ) {
		var hadlerWrapper;

		hadlerWrapper = function ( event ) {
			try {
				var target;

				event = event || window.event;
				target = event.target || event.srcElement;

				if ( !target ) {
					return false;
				}

				while ( target !== handlerNode ) {
					if ( handlerCondition( target ) ) {
						handler.call( target, event );
					}
					target = target.parentNode;
				}
			} catch ( e ) {}
		};

		if ( handlerNode.addEventListener ) {
			handlerNode.addEventListener( eventName, hadlerWrapper, false );
		} else if ( handlerNode.attachEvent ) {
			handlerNode.attachEvent( 'on' + eventName, hadlerWrapper );
		}
	}

	/*
	 **	returns false or pageName
	 **	example:
	 **		https://www.comparethemarket.com/travel-insurance/Prices
	 **		will return 'Travel'
	 */
	function checkPage() {
		var pathCollection = {
				'Car': ['https://quote.comparethemarket.com/Motor/Motor/PricePage.aspx', '//m.quote.comparethemarket.com/Car/quotes-page'],
				'Home': ['https://quote.comparethemarket.com/HouseHold/Quote/PricePage.aspx', 'https://home.comparethemarket.com/your-prices'],
				'Bike': ['https://quote.comparethemarket.com/Bike/Quote/PricePage.aspx'],
				'Van': ['https://quote.comparethemarket.com/Commercial/Motor/PricePage.aspx', '//m.quote.comparethemarket.com/Van/quotes-page'],
				'Pet': ['https://quote.comparethemarket.com/Pet/Pet/PricePage.aspx'],
				'Life': ['https://quote.comparethemarket.com/LifeInsurance/Life/PricePage/Index'],
				'Travel': ['https://www.comparethemarket.com/travel-insurance/Prices'],
				'CC': ['http://www.comparethemarket.com/credit-cards/balance-transfer/', 'http://www.comparethemarket.com/credit-cards/balance-transfer-and-purchases/', 'http://www.comparethemarket.com/credit-cards/purchases/', 'http://www.comparethemarket.com/credit-cards/cashback-and-rewards/', 'http://www.comparethemarket.com/credit-cards/low-apr/', 'http://www.comparethemarket.com/credit-cards/cards-from-your-bank/', 'http://www.comparethemarket.com/credit-cards/credit-building/', 'http://www.comparethemarket.com/credit-cards/cashback/'],
				'Energy': ['http://www.comparethemarket.com/energy/Results/YourResults'],
				'Other': ['https://business.comparethemarket.com/Compare-the-Market/Landlord-Insurance/Your-quotes', 'https://business.comparethemarket.com/Compare-the-Market/Tradesman-Professional-Insurance/Your-quotes', 'https://comparethemarket.comparisoncreator.com/breakdown-cover/results/', 'http://www.comparethemarket.com/mortgages/remortgage/', 'http://www.comparethemarket.com/mortgages/moving-home/', 'http://www.comparethemarket.com/mortgages/first-time-buyer/', 'http://www.comparethemarket.com/mortgages/buy-to-let/', 'http://www.comparethemarket.com/savings-accounts/', 'http://www.comparethemarket.com/current-accounts/', 'http://www.comparethemarket.com/health-insurance/', 'http://www.comparethemarket.com/accident-sickness-and-unemployment-insurance/']
			},
			$break = {};

		try {
			$.each( pathCollection, function ( pageName, pageUrlArray ) {
				$.each( pageUrlArray, function ( index, pageUrl ) {
					/* if at least one page in array contains current 'pathname' */
					if ( location.href.indexOf( pageUrl ) + 1 ) {
						/* save page name for attr */
						$break.data = pageName;
						throw $break;
					}
				} );

			} );
		} catch ( e ) {
			if ( e === $break ) {
				return $break.data;
			}
		}

		return false;
	}

	/* binding actions based on delegation */
	bindActions = (function () {
		var flag;

		return function ( pageName ) {
			var wlhn, attr, buttonsSelector, btnIsPrevent, isActionTracked;

			if ( flag ) {return;}
			flag = true;

			wlhn = window.location.hostname;
			attr = pageName;
			buttonsSelector = '.buyNowClickThrough, input:submit[value="APPLY NOW"], input.button-green-small:button[value="MORE DETAILS"], .btn-go-to-insurer, .insurer-button, .dialog:contains("Go to Insurer"), .buy-policy-button:contains("Go To Insurer"), .mm_button, #buy-online, .policyGotoInsurer .btnGeneric1:not(.disabled)';
			btnIsPrevent = 'a:has(.button-green-large), #switch-now-button';
			isActionTracked = false;

			function exitsAction( func ) {
				if ( !isActionTracked ) {
					isActionTracked = true;

					mmcore.SetAction( 'T44Exits', 1, attr );
					mmcore._async = true;
					mmcore.SetPageID( 'events' );
					mmcore.CGRequest( func );

					setTimeout( function () {
						isActionTracked = false;
					}, 100 );
				}
			}

			/* common logic */
			/* for popup logic is different */
			delegate( document.body, 'mousedown', function ( el ) {
				var isSelectorMatched = $( el ).is( buttonsSelector );

				if ( isSelectorMatched ) {
					return true;
				}
			}, function () {
				exitsAction();
			} );

			delegate( document.body, 'click', function ( el ) {
				var isSelectorMatched = $( el ).is( btnIsPrevent );

				if ( isSelectorMatched ) {
					return true;
				}
			}, function ( event ) {
				var self;

				self = this;

				event.preventDefault();

				exitsAction( function () {
					window.location.assign( self.href );
					window.location.hash = 'mmHash';
				} );
			} );

		}
	}());

	function trackVisitAction() {
		mmcore.SetAction( 'T44ViewPrices', 1 );
		mmcore._async = true;
		mmcore.SetPageID( 'events' );
		mmcore.CGRequest();
	}

	function checkPageAndBindActions() {
		var pageName = checkPage();
		if ( pageName === false ) { return false; }
		bindActions( pageName );
		trackVisitAction();
	}

	/* wait jquery */
	if ( window.jQuery && document.body ) {
		setJqueryVar();
		checkPageAndBindActions();

		(function () {
			var $ = window.jQuery;

			if ( location.href.indexOf( 'm.quote.comparethemarket.com' ) + 1 ) {
				if ( navigator.userAgent.indexOf( 'MSIE 9' ) + 1 ) {
					$( window ).on( 'hashchange', function () {
						if ( location.hash.indexOf( '#Car/quotes-page' ) + 1 || location.hash.indexOf( '#Van/quotes-page' ) + 1 ) {
							(function () {
								var pageName = checkPage();
								if ( pageName === false ) { return false; }
								bindActions( pageName );
							}());

							m.SetAction( 'T44ViewPrices', 1 );
							m._async = true;
							m.SetPageID( 'events' );
							m.CGRequest();
						}
					} );
				} else {
					$( window ).on( 'popstate', function ( event ) {
						if ( event.isTrigger ) {
							if ( location.href.indexOf( 'm.quote.comparethemarket.com/Car/quotes-page' ) + 1 ||
								location.href.indexOf( 'm.quote.comparethemarket.com/Van/quotes-page' ) + 1 ) {

								(function () {
									var pageName = checkPage();
									if ( pageName === false ) { return false; }
									bindActions( pageName );
								}());

								m.SetAction( 'T44ViewPrices', 1 );
								m._async = true;
								m.SetPageID( 'events' );
								m.CGRequest();
							}

						}
					} );
				}


			}

		}());

	} else {
		setTimeout( waiter, 100 );
	}
})();
}catch(err){mmcore.EH(err);}
if(typeof mmcore._callback=='object'&&typeof mmcore._callback[1]=='function'){try{mmcore._callback[1]();}catch(err){mmcore.EH(err);}
finally{mmcore._callback[1]=null;}}
})();